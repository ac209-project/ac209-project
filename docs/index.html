<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <title>Spotify's Next Top Model</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/simple-sidebar.css" rel="stylesheet">

    <!-- Our styles -->
    <link href="css/style.css" rel="stylesheet">

</head>

<body>

<div id="wrapper">

    <!-- Sidebar -->
    <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <li class="sidebar-brand">
                <a href="#">
                    Project Menu
                </a>
            </li>
            <li>
                <a href="#probstatement">Problem Statement</a>
            </li>
            <li>
                <a href="#data">Introduction & Data</a>
            </li>
            <li>
                <a href="#lit">Literature Review</a>
            </li>
            <li>
                <a href="#models">Modeling & Trajectory</a>
            </li>
            <li>
                <a href="#results">Results</a>
            </li>
            <li>
                <a href="#references">References</a>
            </li>
            <li>
                <a href="#contact">Contact</a>
            </li>
        </ul>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div class="container-fluid">

            <div class="row">
                <div class="col-md-12">
                    <h1>Spotify's Next Top Model</h1>
                    <p>
                        Welcome to our Harvard University, Fall 2017 - Data Science I final project page. Please use the
                        menu button below to jump to your section of choice.<br><br>
                        <a href="#menu-toggle" class="btn btn-secondary" id="menu-toggle">Toggle Menu</a>
                    </p>
                </div>
            </div>
            <hr>


            <div id="probstatement" class="row section">
                <div class="col col-md-12"><h2>Problem Statement & Motivation</h2></div>
            </div>

            <div class="row">
                <div class="col col-md-12">
                    <p>
                        The purpose of this project is to use publicly available data through Spotify's
                        <a href="https://developer.spotify.com/web-api/" target="_blank">API</a>, the
                        <a href="https://spotipy.readthedocs.io/en/latest/" target="_blank">Spotipy</a> python library,
                        and audio
                        features
                        in the <a href="https://labrosa.ee.columbia.edu/millionsong/" target="_blank">Million Song
                        Dataset</a> (MSD) to
                        predict the success of Spotify user playlists, and create a tool to build successful playlists
                        based on user specified features (genre, artist, etc.).
                    </p>
                    <p>
                        Throughout this project "playlist success" (our response variable) is defined as the number of
                        playlist followers. We have employed machine-learning regression techniques taught throughout
                        the semester as well as
                        <a href="https://en.wikipedia.org/wiki/Word2vec" target="_blank">Word2vec</a> modeling to
                        predict playlist
                        success.
                    </p>
                </div>
            </div>
            <hr>

            <div id="data" class="row">
                <div class="col col-md-12">
                    <h2>Introduction & Description of Data</h2>
                    <p>In this section we will give you some insights in to the data we collected, aggregated, and
                        combined, as well as the in-depth exploratory data analysis (EDA) performed to try and
                        illustrate relationships surrounding playlist success - specifically artist categorization,
                        artist
                        and playlist genres, and playlist popularity as it relates to time.</p>
                </div>
            </div>

            <div class="row">
                <div class="col col-md-12">
                    <p><b>Baseline Data:</b><br>
                        Baseline data was collected primarily from two sources - the Spotify Web API and the MSD. After
                        sourcing the Spotify users who “own” (the playlists are attached to their accounts) a large
                        number of playlists, the spotipy library was employed to collect user playlists, tracks, user
                        followers, and genre data from the API, each saved as JSON files. Genre information for
                        each playlist was harder to source and incorporate than one would think. It does not come
                        directly from each playlist, but rather from the artists of each track as a separate query. We
                        also collected celebrity names from <a href="https://www.usmagazine.com/celebrities/a/">US
                            Magazine</a> to determine if usernames corresponded to recognized celebrities. The
                        motivation for identifying celebrities is that some of the most popular playlists we have seen
                        have been from a celebrity's official spotify account. We'd like to be able to account for this
                        bias.
                    </p>
                    <p>
                        Before combining into one comprehensive DataFrame, the separate files have the following basic
                        form:
                    </p>
                    <table class="table table-striped table-project">
                        <thead>
                        <tr>
                            <th>Data File</th>
                            <th>Observations</th>
                            <th>Features</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>Usernames</td>
                            <td>846</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>Celebrity Names</td>
                            <td>840</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>Genres</td>
                            <td>1343</td>
                            <td>5</td>
                        </tr>
                        <tr>
                            <td>Playlists</td>
                            <td>8183</td>
                            <td>7</td>
                        </tr>
                        <tr>
                            <td>Tracks</td>
                            <td>207954</td>
                            <td>8</td>
                        </tr>
                        </tbody>
                    </table>
                    <p>
                        The files were combined and manipulated into a single DataFrame via the playlist ID, username,
                        and artist name attributes. While cleaning, we decided to eliminate any playlist with only one
                        follower (the owner).
                    </p>
                    <p>
                        This is clearly a biased subsample of playlists in that we sourced users that own high numbers
                        of playlists and removed those playlists with only one follower, but the flipside is that the
                        vast majority of Spotify users are only making playlists for themselves (one user), or maybe
                        sharing them with just friends of close loved ones. A cross-section of those users would make
                        our already right-skewed (as seen below) data even more skewed.</p>
                    <p>
                        Click <a href="https://github.com/ac209-project/ac209-project/tree/master/getplaylist"
                                 target="_blank">here</a>
                        to explore our data collection techniques.
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col col-md-8">
                    <p><b>Playlist Followers - A first look at playlist success:</b><br>
                        Engineering features around artist and playlist data yielded interesting relationships. A
                        cursory measure of playlist success, our generalized project goal, is the number of followers
                        per playlist. The distribution of playlist followers shows a significant right-skew, with most
                        playlists having few followers and a few approaching the 1M mark. The log-transform of followers
                        illustrates a potentially more useful response variable (right).
                    </p>
                </div>
                <div class="col col-md-4">
                    <img src="img/eda1.png" align="center" class="img">
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <p><b>Categorizing artists:</b><br>
                        We further aggregated the artists by splitting them up into five distinct categories using
                        combinations of their mean popularity (as determined by Spotify's popularity metric) and total
                        number of artist tracks as seen in the following table. These categories should be
                        self-descriptive, but the two plots below do a fantastic job of illustrating each in terms of
                        their thresholds and relationships. The artist popularity metric ties in with our expectations
                        because we see people like Post Malone, Camila Cabello, and Ed Sheeran in our superstar
                        category.
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <table class="table table-project">
                        <thead>
                        <tr>
                            <th>Artist Category</th>
                            <th>Artist Mean Track Popularity</th>
                            <th>Artist Total Tracks</th>
                        </tr>
                        </thead>
                        <tbody class="bands">
                        <tr style="background-color: #ed3a2b">
                            <td>Superstar</td>
                            <td>>= 50</td>
                            <td>>= 10</td>
                        </tr>
                        <tr style="background-color: #f4a83c">
                            <td>Star</td>
                            <td>>= 20 and < 50</td>
                            <td>>= 10</td>
                        </tr>
                        </tr>
                        <tr style="background-color: #0022f5">
                            <td>One-hit-wonder</td>
                            <td>>= 40</td>
                            <td>< 10</td>
                        </tr>
                        <tr style="background-color: #959595">
                            <td>Garage Band</td>
                            <td>< 40</td>
                            <td>< 10</td>
                        </tr>
                        <tr style="background-color: #761a7c">
                            <td>Trash Factory</td>
                            <td>>= 0 and < 20</td>
                            <td>>= 10</td>
                        </tbody>
                    </table>
                </div>
                <div class="col-md-8">
                    <img src="img/eda2.png" align="center" class="img"/>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <p><b>Continuing Artist Analysis:</b><br>
                        Below you can see a illustrative distribution of these five artist categories grouped by
                        playlist as they relate to number of playlist followers and specific track popularity (as
                        determined by Spotify). We see
                        that, unsurprisingly, not only do most playlists incorporate popular artists (red/orange), but a
                        lot of them have the superstar artists’ best songs (the mostly red right side), as well as a
                        smattering of one-hit-wonders (blue in the middle) and a dense area of moderately popular songs
                        throughout (between 30 and 70 popularity). This relationship and playlist architecture should
                        be intuitive. You can also note, interestingly, that only on-hit-wonders get perfect 100s for
                        track popularity.
                    </p>
                </div>
            </div>
            <div class="row">
                <div class='col-md-7 mx-auto'><img src="img/eda3.png" class="img"/></div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <p>
                        <b>Playlists & Time:</b><br>
                        It appears that there may be a relationship between the number of tracks a playlist has and its
                        number of followers (top-left), as well as length of its description (top-right). We also
                        investigated the impact of playlist turnover rate, or relative age, days between the oldest and
                        newest track being added (bottom-left), as well as the age of the oldest song on playlist
                        follower count (bottom-right).
                    </p>
                </div>
            </div>
            <div class="row">
                <div class='col-md-8 mx-auto'><img src="img/eda4.png" class="img"/></div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <p>We also took a closer look at other playlist metrics, specifically average playlist track
                        popularity versus the number of tracks in a playlist or the maximum playlist track popularity as
                        seen in the following two plots, respectively.</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mx-auto"><img src="img/eda5.png" class="img"/></div>
                <div class="col-md-6 mx-auto"><img src="img/eda6.png" class="img"/></div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <p>
                        <b>Genres:</b><br>
                        If you were to ask anyone on the street how they would measure the success of any playlist, one
                        of their first responses would probably be "Depends on the genre." This is a natural
                        categorization we do with music on a daily basis. It is typically how we choose what we are
                        going to listen to when we go to the gym, start our daily commute, or go for a hike in the
                        woods, so of course the predominate genres that make up a playlist will have some impact on the
                        relative success of that playlist against all others, as well as those geared toward the same
                        genre.
                    </p>
                    <p>
                        In this section you will see we took four distinct looks at how genres, at the artist, playlist,
                        and track levels, impact playlist success.<br>

                        <b>Artist Genres - </b>The top-left barplot shows the median number of playlist followers, so as
                        to be less sensitive
                        to outliers.

                        The top-right barplot is based on mean artist popularity by genre. As you can
                        see, there are some specific genres at the top that we would usually associate with one artist
                        (canadian pop - Justin Bieber, detroit hip hop - Eminem). It is likely those artists are skewing
                        the distribution, since those are their respective genres. Sadly, we do not have enough members
                        of each genre to get a good view of the most popular genres by artist.<br>

                        <b>Playlist Genres - </b>The bottom-left barplot look at the most common genre by number of
                        playlist occurances. Here we
                        use the "mode genre" field. This field is made by looking at all the genres that make up a
                        playlist (on a track level) and choosing the most common (mode).<br>

                        <b>Track Genres - </b>The bottom-right barplot takes a look at some "genre-type"
                        information. We are specifically looking at any sub-genres that fall in a larger, more
                        general genre. For example, 'classic rock', 'heavy rock', and 'swedish electronic pop rock'
                        would all fall in our 'rock' genre-type. For each genre related to a song we have binary
                        variables to indicate whether that genre-type is present in the track. The genres in this plot
                        represent the 15 most common genres in our dataset.<br>

                        <br><b>Note:</b> We decided to use the top 15 genres since this corresponds to industry
                        standards for categorizing music. For example, iTunes "search-by-genre" has twenty-two and
                        <i>Billboard 200</i> uses ten.
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mx-auto"><img src="img/eda7.png" class="img"/></div>
                <div class="col-md-6 mx-auto"><img src="img/eda8.png" class="img"/></div>
            </div>
            <div class="row">
                <div class="col-md-6 mx-auto"><img src="img/eda9.png" class="img"/></div>
                <div class="col-md-6 mx-auto"><img src="img/eda10.png" class="img"/></div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <p>Click <a href="https://github.com/ac209-project/ac209-project/tree/master/EDA" target="_blank">here</a>
                        for a
                        closer look at our EDA techniques.</p>
                </div>
            </div>
            <hr>


            <div id="lit" class="row">
                <div class="col col-md-12"><h2>Literature Review & Related Work</h2></div>
            </div>

            <div class="row">
                <div class="col col-md-8">
                    <p>
                        A major contributing source for developing our 209-level feature using word-to-vec (w2v)
                        analysis of
                        playlist titles was <a
                            href="https://github.com/ac209-project/ac209-project/blob/master/w2v/word2vec_paper.pdf"
                            target="_blank">this paper</a> (Mikolov, Chen, Corrado, & Dean, 2013) entitled "Efficient
                        Estimation of Word Representations in Vector Space." The paper abstract follows:
                    </p>
                    <p style="text-align: justify; padding: 3%;"><i>We propose two novel model architectures for
                        computing continuous vector representations of words from very large data sets. The quality of
                        these representations is measured in a word similarity task, and the results are compared to the
                        previously best performing techniques based on different types of neural networks. We observe
                        large improvements in accuracy at much lower computational cost, i.e. it takes less than a day
                        to learn high quality word vectors from a 1.6 billion words data set. Furthermore, we show that
                        these vectors provide state-of-the-art performance on our test set for measuring syntactic and
                        semantic word similarities.</i>
                    </p>
                </div>
                <div class="col col-md-4">
                    <img src="img/w2v1.png" align="center" class="img"/>
                    <p class="caption">A preview of our w2v feature generation</p>
                </div>
            </div>
            <hr>


            <div id="models" class="row">
                <div class="col col-md-12"><h2>Modeling Approach & Project Trajectory</h2></div>
            </div>

            <div class="row">
                <div class="col col-md-12">
                    <p><b>Baseline Modeling:</b><br>
                        As we move into modeling and attempting to predict playlist success based on number of
                        followers, we again use the playlists (and related tracks) that have more than one follower. The
                        rational being that we do not want to use data that could skew the popularity metrics for tracks
                        if it is unikely that those users have any followers that could potentially follow their
                        playlist. Essentially, we do not think those users have enough presence on Spotify for the
                        number of followers to be a meaningful feedback metric for playlist success.
                    </p>
                    <p>
                        Since we have a number of categorical measures, one-hot-encoding was applied and resulted in a
                        DataFrame with ~3500 playlists across 480 columns.
                    </p>
                    <p>
                        We split the the the data with 75% in the training set and 25% in test, then took an iterative
                        approach to modeling, using 5-fold cross-validation throughout, and moved through eight
                        different regression techniques: linear, ridge, lasso, elastic net, k-NN, random forest,
                        adaboost, and SVM.
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col col-md-12">
                    <p><b>Word2vec on Playlist Names:</b><br>
                        In order to go beyond the scope of 109A and incorporate a method not discussed in class, we
                        decided to apply a word-to-vec (w2v) transform to as many applicable words as there are in
                        the set of playlist names. The core intuition being that the playlist name is what represents
                        the playlist to the outside world. A bad playlist name can keep people from following or
                        listening to it, even if the content is great, while a good playlist name can draw users. The
                        playlist name also, hopefully, categorizes the playlist in a meaningful way we can used. This
                        categorization could be by genre, mood, activity or any other type of category the playlist
                        creator thought was useful.
                    </p>
                    <p>
                        Click <a href="https://github.com/ac209-project/ac209-project/tree/master/w2v" target="_blank">here</a>
                        to
                        explore the w2v model training and implentation specific to our project.
                    </p>
                    <p>
                        <b>W2V Techique:</b><br>
                        By using word-to-vec we seek to cluster the playlist names into meaningful categories based on
                        the normalized sum of the vectors of known words in the playlist. This will aggregate the vector
                        information from each word in the playlist description, with all unknown words set to the zero
                        vector. We normalize the vectors in one feature (we have a normalizzed and a not normalized
                        version of this feature) once we aggregate them to stop playlists with just many words from
                        being higher in magnitude than playlists with just a few words.
                    </p>
                    <p>
                        <b>W2V Difficulties:</b><br>
                        Ultimately, there will be some difficulties with misspellings, different languages, and internet
                        slang (or emojis), and we will doubtless lose information in this quick application of w2v, but
                        we think the output will still be a meaningful feature in our final model. We have corrected for
                        many of these as was quickly possible with some simple NLTK and regex tools.
                </div>
            </div>
            <hr>


            <div id="results" class="row">
                <div class="col col-md-12"><h2>Results, Conclusions, & Future Work</h2></div>
            </div>
            <div class="row">
                <div class="col col-md-12">
                    <p>
                        <b>Results:</b><br>
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col col-md-12">
                    <table class="table table-project">
                        <thead>
                        <tr>
                            <th>Results without Word2vec</th>
                            <th>Results with Word2vec</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>
                                <table class="table table-striped">
                                    <thead>
                                    <th>Model</th>
                                    <th>Cross-validated validation<br>set R^2 mean & std<br>(5-folds)</th>
                                    <th>Train Score</th>
                                    <th>Test Score</th>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>Linear Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>Ridge Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>Lasso Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>Elastic Net Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>k-NN Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>Random Forest Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>AdaBoost Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>SVM Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                            <td>
                                <table class="table table-striped">
                                    <thead>
                                    <th>Model</th>
                                    <th>Cross-validated validation<br>set R^2 mean & std<br>(5-folds)</th>
                                    <th>Train Score</th>
                                    <th>Test Score</th>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>Linear Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>Ridge Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>Lasso Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>Elastic Net Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>k-NN Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>Random Forest Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>AdaBoost Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>SVM Regression</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <p>
                        <b>Conclusions:</b><br>
                        Based on the above results, we can see...

                    </p>
                    <p>
                        <b>Future Work:</b><br>
                        If given more time, we woud....

                    </p>
                    <p style="font-style: italic">
                        Show and interpret your results. Summarize your
                        results, the strengths and short-comings of your results, and speculate on how you might
                        address these short-comings if given more time.
                    </p>
                </div>
            </div>
            <hr>

            <div id="references" class="row">
                <div class="col col-md-12"><h2>References</h2></div>
            </div>
            <div class="row">
                <div class="col col-md-12">
                    <ul>
                        <li><a href="https://developer.spotify.com/web-api/" target="_blank">Spotify Web API</a></li>
                        <li><a href="https://spotipy.readthedocs.io/en/latest/" target="_blank">Spotipy</a> python
                            library.
                        </li>
                        <li><a href="https://labrosa.ee.columbia.edu/millionsong/" target="_blank">Million Song
                            Dataset</a></li>
                        <li>
                            "Efficient Estimation of Word Representations in Vector Space." <a
                                href="https://github.com/ac209-project/ac209-project/blob/master/w2v/word2vec_paper.pdf"
                                target="_blank">(Mikolov, Chen, Corrado, & Dean, 2013)</a>
                        </li>
                        <li>This project's <a href="https://github.com/ac209-project/ac209-project" target="_blank">GitHub
                            repository</a>.
                        </li>
                        <li>Course project guidlines <a href="https://github.com/cs109/a-2017/tree/master/Projects"
                                                        target="_blank">GitHub
                            repository</a></li>
                        <li>Website framework provided by <a
                                href="https://github.com/BlackrockDigital/startbootstrap-simple-sidebar"
                                target="_blank">BlackrockDigital</a>.
                        </li>
                    </ul>
                    </p>
                </div>
            </div>
            <hr>

            <div id="contact" class="row">
                <div class="col col-md-12"><h2>Contact</h2></div>
            </div>
            <div class="row">
                <div class="col col-md-9">
                    <p>This project was produced by the following students:</p>
                    <ul>
                        <li><a href="mailto:pblankley@g.harvard.edu">Paul Blankley</a></li>
                        <li><a href="mailto:ryanjanssen@g.harvard.edu">Ryan Janssen</a></li>
                        <li><a href="mailto:andrewlund@g.harvard.edu">Andrew Lund</a></li>
                        <li><a href="mailto:nathaniel_stein@g.harvard.edu">Nate Stein</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap core JavaScript -->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Menu Toggle Script -->
<script>
    $("#menu-toggle").click(function (e) {
//        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
</script>
</body>
</html>
